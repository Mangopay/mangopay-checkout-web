"use strict";var e,t,a,o,i,n,s,r,l,p;Object.defineProperty(exports,"__esModule",{value:!0}),"function"==typeof SuppressedError&&SuppressedError,function(e){e.PAN_ONLY="PAN_ONLY",e.CRYPTOGRAM_3DS="CRYPTOGRAM_3DS"}(e||(e={})),function(e){e.Currency="currency",e.Value="value"}(t||(t={})),function(e){e.ClientId="clientId",e.ProfilingMerchantId="profilingMerchantId",e.Environment="environment",e.PaymentMethods="paymentMethods",e.Amount="amount",e.Branding="branding",e.Locale="locale"}(a||(a={})),function(e){e.AED="AED",e.AUD="AUD",e.CAD="CAD",e.CHF="CHF",e.DKK="DKK",e.EUR="EUR",e.GBP="GBP",e.HKD="HKD",e.JPY="JPY",e.NOK="NOK",e.PLN="PLN",e.SEK="SEK",e.USD="USD"}(o||(o={})),function(e){e.SANDBOX="SANDBOX",e.PRODUCTION="PRODUCTION"}(i||(i={})),function(e){e.CardForm="cardForm",e.Checkout="checkout"}(n||(n={})),function(e){e.Initialize="initialize",e.Disable="disable",e.Enable="enable",e.ClickOutside="clickOutside",e.HostAuthComplete="hostAuthComplete",e.SetErrorMessage="setErrorMessage",e.CompletePayment="completePayment",e.PaymentComplete="paymentComplete",e.TokenizationComplete="tokenizationComplete",e.AuthorizeApplePayComplete="authorizeApplePayComplete",e.GetGooglePayToken="getGooglePayToken",e.SetLoading="setLoading",e.CreateCardRegistrationComplete="createCardRegistrationComplete",e.CreatePaypalPaymentComplete="createPaypalPaymentComplete",e.CreateCardPaymentComplete="createCardPaymentComplete"}(s||(s={})),function(e){e.Initialize="initialize",e.Change="change",e.Error="error",e.Resize="resize",e.OpenHostAuthPopup="openHostAuthPopup",e.CloseHostAuthPopup="closeHostAuthPopup",e.SetErrorMessage="setErrorMessage",e.PaymentMethodSelect="paymentMethodSelect",e.PaymentComplete="paymentComplete",e.TokenizationComplete="tokenizationComplete",e.GetGooglePayToken="getGooglePayToken",e.CreateCardRegistration="createCardRegistration",e.CreatePaypalPayment="createPaypalPayment",e.ShowPopupOverlay="showPopupOverlay",e.CreateCardPayment="createCardPayment"}(r||(r={})),function(e){e.Referrer="referrer",e.Version="version",e.SdkType="sdkType"}(l||(l={}));class h{listen(e,t){this.targetOrigin=t;const a=e=>this.onMessage(e);return e.addEventListener("message",a),()=>e.removeEventListener("message",a)}dispatchMessage(e,t){if(!this.target)throw new Error("Proxy target is required.");const a={eventType:e,data:t};try{this.target.postMessage(a,{targetOrigin:this.targetOrigin})}catch(e){throw console.error("Something went wrong. Please check the provided options. This error most likely happens when you try to pass a function that is not allowed."),e}}onMessage(e){var t;e.origin===this.targetOrigin&&(this.target||(this.target=null!==(t=e.source)&&void 0!==t?t:void 0),this.onTargetMessage(e.data))}}!function(e){e.Referrer="wt-referrer",e.Version="wt-version"}(p||(p={}));const c="1.1.1",d="https://checkout.mangopay.com/",u=()=>(console.warn("Apple Pay is not available and was removed from payment methods list"),!1),m={version:3,url:"https://applepay.cdn-apple.com/jsapi/v1/apple-pay-sdk.js",globalName:"ApplePaySession"},C={merchantCapabilities:["supports3DS"],supportedNetworks:["visa","masterCard","amex","discover","jcb","interac","maestro","electron","cartesBancaires","girocard"]};class y{constructor(e,t,a){this.authorizeRequestInput=e,this.validateApplePayMerchant=a,this.applePayRequest=Object.assign(Object.assign({},t||{}),{merchantCapabilities:(null==t?void 0:t.merchantCapabilities)||C.merchantCapabilities,supportedNetworks:(null==t?void 0:t.supportedNetworks)||C.supportedNetworks})}get isActive(){return!!this.session}start(){if(!ApplePaySession)throw new Error("ApplePaySession is not available");if(!this.applePayRequest)throw new Error("ApplePayRequest is required");this.session&&this.abort(),this.session=new ApplePaySession(m.version,this.applePayRequest),this.session.onvalidatemerchant=e=>this.onValidateMerchant(e),this.session.onpaymentauthorized=e=>this.onPaymentAuthorized(e),this.session.oncancel=()=>this.onCancel(),this.session.begin()}abort(){var e;null===(e=this.session)||void 0===e||e.abort(),this.session=void 0}async onValidateMerchant(e){if(!this.session)throw new Error("Session is required");let t;try{this.validateApplePayMerchant&&(t=await this.validateApplePayMerchant({validationURL:e.validationURL}))}catch(e){}t?this.session.completeMerchantValidation(t):this.abort()}onPaymentAuthorized(e){var t,a,o;if(!this.session)return void this.onCancel();const i=null===(t=e.payment)||void 0===t?void 0:t.token;let n;i?(n=ApplePaySession.STATUS_SUCCESS,null===(o=this.onComplete)||void 0===o||o.call(this,i)):(n=ApplePaySession.STATUS_FAILURE,null===(a=this.onFailed)||void 0===a||a.call(this)),this.session.completePayment(n),this.session=void 0}onCancel(){var e;this.session=void 0,null===(e=this.onFailed)||void 0===e||e.call(this)}}class v{getPaymentMethods(){return this.paymentMethods}constructor(e=[]){this.storedCallbacks={};const t=this.getSupportedPaymentMethods(e);if(!(null==t?void 0:t.length))throw new Error("At least one payment method is required in options.paymentMethods");this.paymentMethods=t;const a=this.getPaymentMethodOptions("card");this.storedCallbacks.onCreateCardRegistration=null==a?void 0:a.onCreateCardRegistration,null==a||delete a.onCreateCardRegistration,this.storedCallbacks.onCreateCardPayment=null==a?void 0:a.onCreatePayment,null==a||delete a.onCreatePayment;const o=this.getApplePayRequest();this.storedCallbacks.onValidateApplePayMerchant=null==o?void 0:o.onValidateMerchant,null==o||delete o.onValidateMerchant;const i=this.getPaymentMethodOptions("paypal");this.storedCallbacks.onCreatePaypalPayment=null==i?void 0:i.onCreatePayment,null==i||delete i.onCreatePayment}getPaymentMethodOptions(e){var t;return null===(t=this.paymentMethods.find((t=>t.type===e)))||void 0===t?void 0:t.options}getApplePayRequest(){const e=this.getPaymentMethodOptions("apple_pay");if(null==e?void 0:e.paymentRequest)return null==e?void 0:e.paymentRequest}getCallbackFn(e){return this.storedCallbacks[e]}authorizeApplePayPaymentRequest(e){return new Promise((t=>{const a=this.getApplePayRequest();let o;a||t({Status:"ERROR",ResultMessage:"PaymentRequest option is required"});try{o=new y(e,a,this.storedCallbacks.onValidateApplePayMerchant),o.onComplete=e=>t(e),o.onFailed=()=>t({Status:"ERROR",ResultMessage:"Apple Pay request failed"}),o.start()}catch(e){e instanceof Error&&t({Status:"ERROR",ResultMessage:e.message||"error.unknown"}),console.error(e)}}))}getSupportedPaymentMethods(e){return e.filter((e=>"apple_pay"!==e.type||(()=>{try{return ApplePaySession&&ApplePaySession.canMakePayments()||u()}catch(e){return u()}})()))}}var g,P;!function(e){e.Visa="VISA",e.Master="MASTERCARD",e.Cb="CB",e.Amex="AMEX",e.Maestro="MAESTRO",e.Other="OTHER"}(g||(g={})),function(e){e.Apm="error.authorize.requiresApmAuthorization",e.ThreeDs="error.authorize.requires3DSecure"}(P||(P={})),P.Apm,P.ThreeDs;const w=(e,t,a)=>{const o=document.createElement(e);return null==t||t.forEach((({property:e,value:t,priority:a})=>{o.style.setProperty(e,t,a)})),null==a||a.forEach((({name:e,value:t})=>{o.setAttribute(e,t)})),o};var k=new Image;k.src="data:image/svg+xml,%3csvg width='24' height='32' viewBox='0 0 24 32' preserveAspectRatio='xMinYMin meet' xmlns='http:%26%23x2F%3b%26%23x2F%3bwww.w3.org%26%23x2F%3b2000%26%23x2F%3bsvg'%3e%3cpath fill='white' opacity='0.7' d='M 20.924 7.157 C 21.204 5.057 20.924 3.657 19.801 2.357 C 18.583 0.957 16.43 0.257 13.716 0.257 L 5.758 0.257 C 5.29 0.257 4.729 0.757 4.634 1.257 L 1.358 23.457 C 1.358 23.857 1.639 24.357 2.107 24.357 L 6.975 24.357 L 6.694 26.557 C 6.6 26.957 6.881 27.257 7.255 27.257 L 11.375 27.257 C 11.844 27.257 12.311 26.957 12.405 26.457 L 12.405 26.157 L 13.247 20.957 L 13.247 20.757 C 13.341 20.257 13.809 19.857 14.277 19.857 L 14.84 19.857 C 18.864 19.857 21.954 18.157 22.89 13.157 C 23.358 11.057 23.172 9.357 22.048 8.157 C 21.767 7.757 21.298 7.457 20.924 7.157 L 20.924 7.157'%3e%3c/path%3e%3cpath fill='white' opacity='0.7' d='M 20.924 7.157 C 21.204 5.057 20.924 3.657 19.801 2.357 C 18.583 0.957 16.43 0.257 13.716 0.257 L 5.758 0.257 C 5.29 0.257 4.729 0.757 4.634 1.257 L 1.358 23.457 C 1.358 23.857 1.639 24.357 2.107 24.357 L 6.975 24.357 L 8.286 16.057 L 8.192 16.357 C 8.286 15.757 8.754 15.357 9.315 15.357 L 11.655 15.357 C 16.243 15.357 19.801 13.357 20.924 7.757 C 20.831 7.457 20.924 7.357 20.924 7.157'%3e%3c/path%3e%3cpath fill='white' opacity='1' d='M 9.504 7.157 C 9.596 6.857 9.784 6.557 10.065 6.357 C 10.251 6.357 10.345 6.257 10.532 6.257 L 16.711 6.257 C 17.461 6.257 18.208 6.357 18.772 6.457 C 18.958 6.457 19.146 6.457 19.333 6.557 C 19.52 6.657 19.707 6.657 19.801 6.757 C 19.894 6.757 19.987 6.757 20.082 6.757 C 20.362 6.857 20.643 7.057 20.924 7.157 C 21.204 5.057 20.924 3.657 19.801 2.257 C 18.677 0.857 16.525 0.257 13.809 0.257 L 5.758 0.257 C 5.29 0.257 4.729 0.657 4.634 1.257 L 1.358 23.457 C 1.358 23.857 1.639 24.357 2.107 24.357 L 6.975 24.357 L 8.286 16.057 L 9.504 7.157 Z'%3e%3c/path%3e%3c/svg%3e";var b=new Image;b.src="data:image/svg+xml,%3csvg width='101px' height='32' viewBox='0 0 101 32' preserveAspectRatio='xMinYMin meet' xmlns='http:%26%23x2F%3b%26%23x2F%3bwww.w3.org%26%23x2F%3b2000%26%23x2F%3bsvg'%3e%3cpath fill='white' d='M 12.237 2.8 L 4.437 2.8 C 3.937 2.8 3.437 3.2 3.337 3.7 L 0.237 23.7 C 0.137 24.1 0.437 24.4 0.837 24.4 L 4.537 24.4 C 5.037 24.4 5.537 24 5.637 23.5 L 6.437 18.1 C 6.537 17.6 6.937 17.2 7.537 17.2 L 10.037 17.2 C 15.137 17.2 18.137 14.7 18.937 9.8 C 19.237 7.7 18.937 6 17.937 4.8 C 16.837 3.5 14.837 2.8 12.237 2.8 Z M 13.137 10.1 C 12.737 12.9 10.537 12.9 8.537 12.9 L 7.337 12.9 L 8.137 7.7 C 8.137 7.4 8.437 7.2 8.737 7.2 L 9.237 7.2 C 10.637 7.2 11.937 7.2 12.637 8 C 13.137 8.4 13.337 9.1 13.137 10.1 Z'%3e%3c/path%3e%3cpath fill='white' d='M 35.437 10 L 31.737 10 C 31.437 10 31.137 10.2 31.137 10.5 L 30.937 11.5 L 30.637 11.1 C 29.837 9.9 28.037 9.5 26.237 9.5 C 22.137 9.5 18.637 12.6 17.937 17 C 17.537 19.2 18.037 21.3 19.337 22.7 C 20.437 24 22.137 24.6 24.037 24.6 C 27.337 24.6 29.237 22.5 29.237 22.5 L 29.037 23.5 C 28.937 23.9 29.237 24.3 29.637 24.3 L 33.037 24.3 C 33.537 24.3 34.037 23.9 34.137 23.4 L 36.137 10.6 C 36.237 10.4 35.837 10 35.437 10 Z M 30.337 17.2 C 29.937 19.3 28.337 20.8 26.137 20.8 C 25.037 20.8 24.237 20.5 23.637 19.8 C 23.037 19.1 22.837 18.2 23.037 17.2 C 23.337 15.1 25.137 13.6 27.237 13.6 C 28.337 13.6 29.137 14 29.737 14.6 C 30.237 15.3 30.437 16.2 30.337 17.2 Z'%3e%3c/path%3e%3cpath fill='white' d='M 55.337 10 L 51.637 10 C 51.237 10 50.937 10.2 50.737 10.5 L 45.537 18.1 L 43.337 10.8 C 43.237 10.3 42.737 10 42.337 10 L 38.637 10 C 38.237 10 37.837 10.4 38.037 10.9 L 42.137 23 L 38.237 28.4 C 37.937 28.8 38.237 29.4 38.737 29.4 L 42.437 29.4 C 42.837 29.4 43.137 29.2 43.337 28.9 L 55.837 10.9 C 56.137 10.6 55.837 10 55.337 10 Z'%3e%3c/path%3e%3cpath fill='white' d='M 67.737 2.8 L 59.937 2.8 C 59.437 2.8 58.937 3.2 58.837 3.7 L 55.737 23.6 C 55.637 24 55.937 24.3 56.337 24.3 L 60.337 24.3 C 60.737 24.3 61.037 24 61.037 23.7 L 61.937 18 C 62.037 17.5 62.437 17.1 63.037 17.1 L 65.537 17.1 C 70.637 17.1 73.637 14.6 74.437 9.7 C 74.737 7.6 74.437 5.9 73.437 4.7 C 72.237 3.5 70.337 2.8 67.737 2.8 Z M 68.637 10.1 C 68.237 12.9 66.037 12.9 64.037 12.9 L 62.837 12.9 L 63.637 7.7 C 63.637 7.4 63.937 7.2 64.237 7.2 L 64.737 7.2 C 66.137 7.2 67.437 7.2 68.137 8 C 68.637 8.4 68.737 9.1 68.637 10.1 Z'%3e%3c/path%3e%3cpath fill='white' d='M 90.937 10 L 87.237 10 C 86.937 10 86.637 10.2 86.637 10.5 L 86.437 11.5 L 86.137 11.1 C 85.337 9.9 83.537 9.5 81.737 9.5 C 77.637 9.5 74.137 12.6 73.437 17 C 73.037 19.2 73.537 21.3 74.837 22.7 C 75.937 24 77.637 24.6 79.537 24.6 C 82.837 24.6 84.737 22.5 84.737 22.5 L 84.537 23.5 C 84.437 23.9 84.737 24.3 85.137 24.3 L 88.537 24.3 C 89.037 24.3 89.537 23.9 89.637 23.4 L 91.637 10.6 C 91.637 10.4 91.337 10 90.937 10 Z M 85.737 17.2 C 85.337 19.3 83.737 20.8 81.537 20.8 C 80.437 20.8 79.637 20.5 79.037 19.8 C 78.437 19.1 78.237 18.2 78.437 17.2 C 78.737 15.1 80.537 13.6 82.637 13.6 C 83.737 13.6 84.537 14 85.137 14.6 C 85.737 15.3 85.937 16.2 85.737 17.2 Z'%3e%3c/path%3e%3cpath fill='white' d='M 95.337 3.3 L 92.137 23.6 C 92.037 24 92.337 24.3 92.737 24.3 L 95.937 24.3 C 96.437 24.3 96.937 23.9 97.037 23.4 L 100.237 3.5 C 100.337 3.1 100.037 2.8 99.637 2.8 L 96.037 2.8 C 95.637 2.8 95.437 3 95.337 3.3 Z'%3e%3c/path%3e%3c/svg%3e";var f=new Image;f.src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0%2c0%2c256%2c256' width='16px' height='16px'%3e%3cg fill='white' fill-rule='nonzero' stroke='none' stroke-width='1' stroke-linecap='butt' stroke-linejoin='miter' stroke-miterlimit='10' stroke-dasharray='' stroke-dashoffset='0' font-family='none' font-weight='none' font-size='none' text-anchor='none' style='mix-blend-mode: normal'%3e%3cg transform='scale(10.66667%2c10.66667)'%3e%3cpath d='M4.70703%2c3.29297l-1.41406%2c1.41406l7.29297%2c7.29297l-7.29297%2c7.29297l1.41406%2c1.41406l7.29297%2c-7.29297l7.29297%2c7.29297l1.41406%2c-1.41406l-7.29297%2c-7.29297l7.29297%2c-7.29297l-1.41406%2c-1.41406l-7.29297%2c7.29297z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e";class M{constructor(){this.childWindow=null}onOpenHostAuthPopup({url:e,overlay:t},a){var o;this.childWindow&&(null===(o=this.childWindow)||void 0===o||o.close());const i=((e,t)=>{const a=window.outerWidth/2+window.screenX-e/2;return`resizable=yes,width=${+e},height=${+t},top=${+(window.outerHeight/2+window.screenY-t/2)},left=${+a}`})(500,620);this.childWindow=window.open(e,"mgp-sdk-popup",i),t&&this.showPopupOverlay(t,a)}hidePopupOverlay(){var e,t;null===(e=this.childWindow)||void 0===e||e.close();const a=document.querySelector("#mgp-sdk-popup-overlay");null==a||a.removeEventListener("click",this.onPopupOverlayClick.bind(this)),null==a||a.removeEventListener("click",this.onOverlayCloseClick.bind(this)),null===(t=null==a?void 0:a.parentNode)||void 0===t||t.removeChild(a)}onPopupOverlayClick(){var e;null===(e=this.childWindow)||void 0===e||e.focus()}onOverlayCloseClick(){this.hidePopupOverlay()}showPopupOverlay(e,t){const a=(e=>{const t=w("div",[{property:"font-family",value:"Helvetica Neue, Helvetica, Arial"},{property:"width",value:"100%"},{property:"height",value:"100%"},{property:"top",value:"0"},{property:"left",value:"0"},{property:"position",value:"fixed"},{property:"z-index",value:"232323"},{property:"color",value:"#fff"},{property:"background",value:"rgba(0, 0, 0, 0.8)"},{property:"box-sizing",value:"border-box"},{property:"border",value:"1px solid #eee"},{property:"cursor",value:"pointer"}],[{name:"id",value:"mgp-sdk-popup-overlay"}]),a=w("div",[{property:"font-size",value:"14px"},{property:"text-align",value:"center"},{property:"max-width",value:"350px"},{property:"top",value:"50%"},{property:"left",value:"50%"},{property:"position",value:"absolute"},{property:"transform",value:"translateX(-50%) translateY(-50%)"}]),o=w("div");"paypal"===e&&(o.appendChild(k),o.appendChild(b));const i=w("div",[{property:"font-size",value:"15px"},{property:"line-height",value:"1.5"},{property:"padding",value:"0 0 40px 0"}]);i.innerText=`Don’t see the ${"paypal"===e?"secure paypal":"3D secure"} browser? We’ll help you re-launch the window\n    to complete your purchase`;const n=w("a",[{property:"font-size",value:"15px"},{property:"font-weight",value:"700"},{property:"color",value:"#fff"},{property:"text-decoration",value:"none"},{property:"border-bottom",value:"1px solid #fff"}]);return n.innerText="Click to Continue","paypal"===e&&a.appendChild(o),a.appendChild(i),a.appendChild(n),t.appendChild(a),t})(e);a.addEventListener("click",this.onPopupOverlayClick.bind(this)),t.push((()=>null==a?void 0:a.removeEventListener("click",this.onPopupOverlayClick.bind(this))));const o=(()=>{const e=w("a",[{property:"position",value:"absolute"},{property:"position",value:"absolute"},{property:"right",value:"16px"},{property:"top",value:"16px"},{property:"width",value:"16px"},{property:"height",value:"16px"},{property:"opacity",value:"0.6"},{property:"text-decoration",value:"none"}]);return e.appendChild(f),e})();o.addEventListener("click",this.onOverlayCloseClick.bind(this)),t.push((()=>null==a?void 0:a.removeEventListener("click",this.onOverlayCloseClick.bind(this)))),a.appendChild(o);const i=document.querySelector("body");null==i||i.appendChild(a),this.childWindow=window.open("","mgp-sdk-popup");const n=setInterval((()=>{var e;(null===(e=this.childWindow)||void 0===e?void 0:e.closed)&&(this.hidePopupOverlay(),clearInterval(n))}),1e3)}}class S extends h{get isComplete(){return!!this.isMounted&&this._isComplete}get isDisabled(){return!this.isMounted||this._isDisabled}constructor(e,t,a,o){var i;super(),this.element=null,this._isDisabled=!1,this._isComplete=!1,this.isMounted=!1,this.checkoutSdkSubscriptions=[],this.unsubscribeCallbacks=[],this.options=e,this.hostedCheckoutSdkUrl=t,this.origin=a,this.sdkType=o;const n=null===(i=this.options)||void 0===i?void 0:i.paymentMethods;this.paymentMethodsService=new v(n),this.redirectFlowService=new M}mount(e){if(this.isMounted)throw new Error("Element already mounted.");if(this.element="string"==typeof e?document.querySelector(e):e,!this.element)throw new Error("Element is not found.");const t=new URL(this.hostedCheckoutSdkUrl);t.searchParams.append(l.Referrer,this.origin),t.searchParams.append(l.Version,c),t.searchParams.append(l.SdkType,this.sdkType),this.targetOrigin=t.origin,this.frameElement=(e=>{const t=w("iframe",[{property:"border",value:"none",priority:"important"},{property:"width",value:"100%",priority:"important"},{property:"min-width",value:"100%",priority:"important"},{property:"overflow",value:"hidden",priority:"important"},{property:"display",value:"block",priority:"important"},{property:"user-select",value:"none",priority:"important"}],[{name:"frameborder",value:"0"},{name:"allowtransparency",value:"true"},{name:"scrolling",value:"no"},{name:"allowPaymentRequest",value:"true"}]);return t.src=e,t})(t.toString()),this.frameElement.addEventListener("load",(()=>this.onFrameLoad()));const a=()=>this.onDocumentClick();document.addEventListener("click",a),this.unsubscribeCallbacks.push((()=>document.removeEventListener("click",a))),this.element.appendChild(this.frameElement)}umount(){var e;null===(e=this.frameElement)||void 0===e||e.remove(),this.frameElement=void 0,this.target=void 0,this.unsubscribeCallbacks.forEach((e=>e())),this.unsubscribeCallbacks=[],this.checkoutSdkSubscriptions=[],this.isMounted=!1}on(e,t){const a=e=>t(e);return this.checkoutSdkSubscriptions.push({type:e,listener:a}),()=>{this.checkoutSdkSubscriptions=this.checkoutSdkSubscriptions.filter((e=>e.listener!==a))}}disable(){this.isMounted&&(this._isDisabled=!0,this.dispatchMessage(s.Disable,void 0))}enable(){this.isMounted&&(this._isDisabled=!1,this.dispatchMessage(s.Enable,void 0))}completePayment(){this.dispatchMessage(s.CompletePayment,void 0)}setErrorMessage(e){this.dispatchMessage(s.SetErrorMessage,e)}setLoading(e){this.dispatchMessage(s.SetLoading,e)}onTargetMessage(e){switch(e.eventType){case r.Initialize:this.onInitialized();break;case r.Change:this.onChange(e.data);break;case r.Error:this.onError(e.data);break;case r.Resize:this.onResize(e.data);break;case r.OpenHostAuthPopup:this.redirectFlowService.onOpenHostAuthPopup(e.data,this.unsubscribeCallbacks);break;case r.CloseHostAuthPopup:this.onHostAuthComplete(e.data);break;case r.PaymentMethodSelect:this.onPaymentMethodSelect(e.data);break;case r.PaymentComplete:this.onPaymentComplete(e.data);break;case r.TokenizationComplete:this.onTokenizationComplete(e.data);break;case r.CreateCardRegistration:this.handleCreateCardRegistration(e.data).catch(console.error);break;case r.CreatePaypalPayment:this.handleCreatePaypalPayment(e.data).catch(console.error);break;case r.ShowPopupOverlay:this.redirectFlowService.showPopupOverlay(e.data,this.unsubscribeCallbacks);break;case r.CreateCardPayment:this.handleCreateCardPayment(e.data).catch(console.error);break;default:console.warn(`Unknown event type: "${e.eventType}".`)}}dispatchInitialize(){const e=this.paymentMethodsService.getPaymentMethods(),t="function"==typeof this.paymentMethodsService.getCallbackFn("onCreateCardPayment"),a=Object.assign(Object.assign({},this.options),{handleCardPayment:t,paymentMethods:e});setTimeout((()=>{this.dispatchMessage(s.Initialize,a)}),10)}onFrameLoad(){var e;if(!(null===(e=this.frameElement)||void 0===e?void 0:e.contentWindow))throw new Error("Failed to load MangopayCheckout SDK iFrame.");this.target=this.frameElement.contentWindow;const t=this.listen(window,this.targetOrigin);this.unsubscribeCallbacks.push(t),this.dispatchInitialize()}onInitialized(){this.frameElement&&(this.isMounted=!0,this.dispatchSdkEvent("initialize",void 0))}onError(e){this.dispatchSdkEvent("error",e)}onChange(e){this._isComplete=e.isComplete,this.dispatchSdkEvent("change",e)}onPaymentComplete(e){this.dispatchSdkEvent("paymentComplete",e)}onTokenizationComplete(e){this.dispatchSdkEvent("tokenizationComplete",e)}onResize(e){this.isMounted&&this.frameElement&&this.frameElement.style.setProperty("height",`${e.height+14}px`,"important")}onDocumentClick(){this.dispatchMessage(s.ClickOutside,void 0)}async onApplePayPaymentRequest(e){const t=await this.paymentMethodsService.authorizeApplePayPaymentRequest(e);this.onAuthorizeApplePayComplete(t)}onAuthorizeApplePayComplete(e){this.dispatchMessage(s.AuthorizeApplePayComplete,e)}onPaymentMethodSelect(e){"apple_pay"===e.paymentMethod&&(null==e?void 0:e.paymentData)?this.onApplePayPaymentRequest(null==e?void 0:e.paymentData).catch(console.error):this.dispatchSdkEvent("paymentMethodSelect",e)}onHostAuthComplete(e){this.redirectFlowService.hidePopupOverlay(),this.setLoading(!1),this.dispatchMessage(s.HostAuthComplete,e)}onCreateCardRegistrationComplete(e){this.dispatchMessage(s.CreateCardRegistrationComplete,e)}async handleCreateCardRegistration({cardType:e}){const t=this.paymentMethodsService.getCallbackFn("onCreateCardRegistration");if(t){const a=await t(e);a&&this.onCreateCardRegistrationComplete(a)}}onCreatePaypalPaymentComplete(e){this.dispatchMessage(s.CreatePaypalPaymentComplete,e)}async handleCreatePaypalPayment({profilingAttemptReference:e}){const t=this.paymentMethodsService.getCallbackFn("onCreatePaypalPayment");if(t){const a=await t(e);a&&this.onCreatePaypalPaymentComplete(a)}}async handleCreateCardPayment(e){const t=this.paymentMethodsService.getCallbackFn("onCreateCardPayment");if(t){const a=await t(e);a&&this.onCreateCardPaymentComplete(a)}}onCreateCardPaymentComplete(e){this.dispatchMessage(s.CreateCardPaymentComplete,e)}dispatchSdkEvent(e,t){this.checkoutSdkSubscriptions.filter((t=>t.type===e)).forEach((a=>a.listener(new CustomEvent(e,{detail:t}))))}}S.version=c;const L=d;class A{}A.loadCheckoutSdk=(e,t)=>{var a;if(!(null===(a=null==t?void 0:t.paymentMethods)||void 0===a?void 0:a.length))throw new Error("At least one payment method is required in options.paymentMethods");return new Promise((a=>{const o=new S(t,L,window.origin,n.Checkout);o.on("initialize",(()=>a(o))),o.mount(e)}))},A.loadCardFormElement=(e,t)=>{const{paymentMethod:a}=t,o=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(a[o[i]]=e[o[i]])}return a}(t,["paymentMethod"]);if(!a)throw new Error("Card payment method is required in options.paymentMethod");return new Promise((t=>{const i=new S(Object.assign(Object.assign({},o),{paymentMethods:[a]}),L,window.origin,n.CardForm);i.on("initialize",(()=>t(i))),i.mount(e)}))},exports.CheckoutSdk=A;
//# sourceMappingURL=index.js.map
